{% extends "base.html" %}
{% block title %}MyKursus{% endblock %}
{% block content %}
{% load static %}

<script>
  document.addEventListener('DOMContentLoaded', function() {
  var progressBars = document.querySelectorAll('.progress-bar');

  progressBars.forEach(function(progressBar) {
    var progressValue = parseInt(progressBar.dataset.progress);

    progressBar.style.width = progressValue + '%';
  });
});

</script>



<!-- PAGE TITLE
    ================================================== -->
<header class="bg-white py-5 py-lg-8 position-relative mb-5" style="background-image: none;">
    <div class="container text-center py-xl-2">
        <h1 class="display-4 fw-semi-bold mb-0">Kursus Yang Diikuti</h1>

    </div>

</header>


<!-- CONTROL BAR
================================================== -->
<div class="container mb-6 mb-xl-8 z-index-2">
    <div class="d-lg-flex align-items-center mb-6 mb-xl-0">
        <p class="mb-lg-0">Kamu memiliki <span class="text-dark">{{ course_count }} Kursus</span> tersedia</p>

    </div>
</div>

<!-- COURSE
================================================== -->
<div class="container">
    <div class="row">


        <div class="col-xl-9">
            {% include 'components/msg.html' %}
            <div class="row row-cols-md-2 row-cols-lg-3 mb-3 ">
                {% for i in courses %}
                <div class="col-md pb-4 pb-md-7">
                    <!-- Card -->
                    <div class="card border shadow p-2 lift sk-fade">
                        <!-- Image -->
                        <div class="card-zoom position-relative">
                            <a href="{% if user.is_authenticated and i.payment and i.payment.is_verified %}{% url 'watch_course' slug=i.course.slug %}{% else %}#your_verification_page_url{% endif %}"
                               data-course-id="{{ i.course.id }}" class="card-img sk-thumbnail img-ratio-3 d-block">
                                <img class="rounded shadow-light-lg" src="{{i.course.featured_image.url}}" alt="...">
                            </a>
                        </div>

                        <!-- Footer -->
                        <div class="card-footer px-2 pb-2 mb-1 pt-4 position-relative">
                            <a href="{% if user.is_authenticated and i.payment and i.payment.is_verified %}{% url 'watch_course' slug=i.course.slug %}{% else %}#your_verification_page_url{% endif %}"
                               class="d-block">
                                <div class="avatar sk-fade-right avatar-xl badge-float position-absolute top-0 right-0 mt-n6 me-5 rounded-circle shadow border border-white border-w-lg">
                                    <img src="{{i.author.image_author.url}}" alt="..."
                                         class="avatar-img rounded-circle">
                                </div>
                            </a>

                            <!-- Preheading -->
                            <a href="{% if user.is_authenticated and i.payment and i.payment.is_verified %}{% url 'watch_course' slug=i.course.slug %}{% else %}#your_verification_page_url{% endif %}">
                                <span class="mb-1 d-inline-block text-gray-800">{{i.course.category}}</span>

                            </a>

                            <!-- Heading -->
                            <div class="position-relative">
                                <a href="{% if user.is_authenticated and i.payment and i.payment.is_verified %}{% url 'watch_course' slug=i.course.slug %}{% else %}#your_verification_page_url{% endif %}">
                                    {{ i.course.title }}
                                </a>

                                <div class="progress-container">
                                    <!-- Update progress label with watched percentage -->
                                    <span class="progress-label text-black">{{ i.watched_percentage }}%</span>
                                    <div class="progress">
                                        <!-- Update progress bar width with watched percentage -->
                                        <div class="progress-bar" role="progressbar"
                                             style="width: {{ i.watched_percentage }}%;" data-progress="{{ i.watched_percentage }}"></div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>
                {% endfor %}

            </div>


            <!-- PAGINATION
            ================================================== -->
            <nav class="mb-11" aria-label="Page navigationa">
                <ul class="pagination justify-content-center">
                    <li class="page-item">
                        <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true"><i class="fas fa-arrow-left"></i></span>
                        </a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item active"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true"><i class="fas fa-arrow-right"></i></span>
                        </a>
                    </li>
                </ul>
            </nav>

        </div>
    </div>
</div>


{% endblock %}
